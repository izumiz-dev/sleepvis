(this.webpackJsonpsleepvis=this.webpackJsonpsleepvis||[]).push([[0],{20:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r,i,a,c,s,o,l,d,u=n(1),f=n.n(u),j=n(12),p=n.n(j),b=(n(20),n(10)),m=n(0),x=function(e){var t=e.setInputFile,n=Object(u.useCallback)((function(e){null!==e.currentTarget.files&&t(e.currentTarget.files[0])}),[t]);return Object(m.jsx)("div",{style:{padding:"4px",margin:"8px"},children:Object(m.jsx)("input",{type:"file",accept:"text",onChange:n})})},O=n(5),y=n(7),h=n(4),g=function(e){return 2===e.split(":").length?{hours:parseInt(e.split(":")[0]),minutes:parseInt(e.split(":")[1])}:"--"===e?{hours:0,minutes:0}:{hours:0,minutes:parseInt(e)}},v=n(2),T=n(3),w=T.a.div(r||(r=Object(v.a)(["\n  margin-top: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n"]))),F=T.a.h1(i||(i=Object(v.a)(["\n  /* color: #ffffff; */\n"]))),D=T.a.div(a||(a=Object(v.a)(["\n  /* color: #ffffff; */\n"]))),S=T.a.div(c||(c=Object(v.a)(["\n  /* color: white; */\n  font-weight: 500;\n  margin-top: 2px;\n  font-size: 1.5rem;\n"]))),I=T.a.div(s||(s=Object(v.a)(["\n  padding: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-flow: column;\n  height: 200px;\n  margin: 4px;\n  border-radius: 8px;\n  background: #eeeeee;\n"]))),k=T.a.div(o||(o=Object(v.a)(["\n  width: calc(220px * 7);\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-end;\n"]))),M=function(e){var t=e.duration,n=e.sleepType;return Object(m.jsx)(E,{duration:t,sleepType:n,children:"string"!==typeof t?t.toFormat("hh:mm"):t})},E=T.a.div(l||(l=Object(v.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  font-weight: 500;\n  display: flex;\n  -webkit-align-items: center;\n  align-items: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  border-radius: 8px;\n  height: ",";\n  width: 60px;\n  margin: 4px;\n  /* color: white; */\n  background: ",";\n"])),(function(e){return B(e.duration)}),(function(e){return C(e.duration,e.sleepType)})),C=function(e,t){var n="string"===typeof e?parseInt(e):e.hours,r="#0099ff";return"goodQuality"===t&&(r="#15ff00"),"deepSleep"===t&&(r="#7700ff"),n>=8?r+"FF":n>=6?r+"DD":n>=4?r+"BB":n>=2?r+"99":n>=0?r+"55":"#5e5e5edd"},B=function(e){var t="string"===typeof e?parseInt(e):e.hours;return"".concat(10*t+20,"px")},H=function(e){var t=e.calendar;return Object(m.jsx)(k,{children:t.flat().map((function(e){return"string"!==typeof e&&void 0!==e.endTime?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(I,{children:[Object(m.jsx)(S,{children:e.endTime.setLocale("jp").toFormat("MM.dd")}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end"},children:[Object(m.jsx)(Q,{children:Object(m.jsx)(M,{duration:e.sleepTime,sleepType:"sleepTime"})}),Object(m.jsx)(Q,{children:Object(m.jsx)(M,{duration:e.goodQuality,sleepType:"goodQuality"})}),Object(m.jsx)(Q,{children:Object(m.jsx)(M,{duration:e.deepSleep,sleepType:"deepSleep"})})]})]})}):Object(m.jsxs)(I,{children:[Object(m.jsx)(S,{children:"".concat(e.toString().substring(5,10).replace("-","."))}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(m.jsx)(M,{duration:""}),Object(m.jsx)(M,{duration:""}),Object(m.jsx)(M,{duration:""})]})]})}))})},Q=T.a.div(d||(d=Object(v.a)(["\n  display: flex;\n  flex-flow: column;\n  justify-content: flex-end;\n  align-items: center;\n"]))),L=function(){var e=Object(u.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1],i=Object(u.useState)(""),a=Object(b.a)(i,2),c=a[0],s=a[1];Object(u.useEffect)((function(){if(n){var e=new FileReader;e.onload=function(){return s(e.result)},e.readAsText(n,"UTF-8")}}),[n]);var o=function(e){if(""===e)return!1;var t=e.split("\r\n");t.shift(),t.pop();for(var n=t.map((function(e){var t=e.split(",");return{startTime:h.DateTime.fromFormat(t[0],"yyyy-MM-dd HH:mm:ss"),endTime:h.DateTime.fromFormat(t[1],"yyyy-MM-dd HH:mm:ss"),duration:h.Duration.fromObject(g(t[2])),sleepTime:h.Duration.fromObject(g(t[3])),wakingInBed:h.Duration.fromObject(g(t[4])),timeToSleep:h.Duration.fromObject(g(t[5])),goodQuality:h.Duration.fromObject(g(t[6])),deepSleep:h.Duration.fromObject(g(t[7])),heartRate:parseInt(t[8]),tag:t[9],annotation:t[10]}})),r=n.reduce((function(e,t){return Object(y.a)(Object(y.a)({},e),{},Object(O.a)({},t.endTime.toFormat("yyyy-MM-dd-EEE"),t))}),{}),i=7!==n[0].endTime.weekday?n[0].endTime.startOf("week").minus({days:1}):n[0].endTime.startOf("day"),a=n[n.length-1].endTime.endOf("week").startOf("day").diff(i,"days").days,c=[],s=0,o=0;o<a;o++){var l=i.plus({days:o}).toFormat("yyyy-MM-dd-EEE");s===c.length&&c.push([]),c[s].push(r[l]?r[l]:l),o%7===6&&s++}return console.table(c),c}(c);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(w,{children:[Object(m.jsx)(F,{children:"Sleepvis"}),Object(m.jsxs)(D,{children:["Autosleep\u30a2\u30d7\u30ea\u306eCSV\u3092\u53ef\u8996\u5316\u3059\u308bWeb\u30a2\u30d7\u30ea\u3067\u3059\uff0e",Object(m.jsx)("br",{}),"\u968f\u6642\u6a5f\u80fd\u8ffd\u52a0\u4e2d\u3067\u3059\uff0e\u73fe\u72b6\u306f\uff0c\u7761\u7720\u6642\u9593\u306e\u8868\u793a\u6a5f\u80fd\u306e\u307f\u306b\u306a\u308a\u307e\u3059\uff0e",Object(m.jsx)("br",{}),"\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u305fCSV\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\uff0e"]}),Object(m.jsx)(x,{setInputFile:r}),o&&Object(m.jsx)(H,{calendar:o})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};p.a.render(Object(m.jsx)(f.a.StrictMode,{children:Object(m.jsx)(L,{})}),document.getElementById("root")),A()}},[[26,1,2]]]);
//# sourceMappingURL=main.b7478893.chunk.js.map