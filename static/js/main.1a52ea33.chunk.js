(this.webpackJsonpsleepvis=this.webpackJsonpsleepvis||[]).push([[0],{20:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r,i,c,a,s,o,d,l,u=n(1),j=n.n(u),f=n(12),b=n.n(f),p=(n(20),n(10)),x=n(0),m=function(e){var t=e.setInputFile,n=Object(u.useCallback)((function(e){null!==e.currentTarget.files&&t(e.currentTarget.files[0])}),[t]);return Object(x.jsx)("div",{style:{background:"#FFFFFFDD",padding:"4px",margin:"8px"},children:Object(x.jsx)("input",{type:"file",accept:"text",onChange:n})})},O=n(5),h=n(7),y=n(4),g=function(e){return 2===e.split(":").length?{hours:parseInt(e.split(":")[0]),minutes:parseInt(e.split(":")[1])}:"--"===e?{hours:0,minutes:0}:{hours:0,minutes:parseInt(e)}},v=n(2),w=n(3),F=w.a.div(r||(r=Object(v.a)(["\n  margin-top: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n"]))),T=w.a.h1(i||(i=Object(v.a)(["\n  color: #ffffff;\n"]))),D=w.a.div(c||(c=Object(v.a)(["\n  color: #ffffff;\n"]))),k=w.a.div(a||(a=Object(v.a)(["\n  color: white;\n  margin-top: 2px;\n"]))),I=w.a.div(s||(s=Object(v.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-flow: column;\n  height: 100px;\n  border: 1px ridge #ffffff99;\n  background: linear-gradient(#08176d99, #01010799);\n  margin: 2px 1px;\n  border-radius: 4px;\n"]))),M=w.a.div(o||(o=Object(v.a)(["\n  width: calc(208px * 7);\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-end;\n"]))),S=function(e){var t=e.duration;return Object(x.jsx)(E,{duration:t,children:"string"!==typeof t?t.toFormat("hh:mm"):t})},E=w.a.div(d||(d=Object(v.a)(["\n  display: flex;\n  -webkit-align-items: center;\n  align-items: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  border-radius: 4px;\n  height: ",";\n  width: 60px;\n  margin: 4px;\n  color: white;\n  background: ",";\n"])),(function(e){return H(e.duration)}),(function(e){return C(e.duration)})),C=function(e){var t="string"===typeof e?parseInt(e):e.hours;return t>=8?"#43a2e2dd":t>=6?"#54c454dd":t>=4?"#ac692bdd":t>=2?"#dd5100dd":t>=0?"#FF0000dd":"#5e5e5edd"},H=function(e){var t="string"===typeof e?parseInt(e):e.hours;return"".concat(1.5*t+20,"px")},B=function(e){var t=e.calendar;return Object(x.jsx)(M,{children:t.flat().map((function(e){return"string"!==typeof e&&void 0!==e.endTime?Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(I,{children:[Object(x.jsx)(k,{children:e.endTime.setLocale("jp").toFormat("MM/dd")}),Object(x.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end"},children:[Object(x.jsxs)(L,{children:[Object(x.jsx)("div",{style:{color:"white"},children:"Total"}),Object(x.jsx)(S,{duration:e.sleepTime})]}),Object(x.jsxs)(L,{children:[Object(x.jsx)("div",{style:{color:"white"},children:"Good"}),Object(x.jsx)(S,{duration:e.goodQuality})]}),Object(x.jsxs)(L,{children:[Object(x.jsx)("div",{style:{color:"white"},children:"Deep"}),Object(x.jsx)(S,{duration:e.deepSleep})]})]})]})}):Object(x.jsxs)(I,{children:[Object(x.jsx)(k,{children:"".concat(e.toString().substring(5,10).replace("-","/"))}),Object(x.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(x.jsx)(S,{duration:""}),Object(x.jsx)(S,{duration:""}),Object(x.jsx)(S,{duration:""})]})]})}))})},L=w.a.div(l||(l=Object(v.a)(["\n  height: 70px;\n  display: flex;\n  flex-flow: column;\n  justify-content: space-between;\n  align-items: center;\n"]))),A=function(){var e=Object(u.useState)(),t=Object(p.a)(e,2),n=t[0],r=t[1],i=Object(u.useState)(""),c=Object(p.a)(i,2),a=c[0],s=c[1];Object(u.useEffect)((function(){if(n){var e=new FileReader;e.onload=function(){return s(e.result)},e.readAsText(n,"UTF-8")}}),[n]);var o=function(e){if(""===e)return!1;var t=e.split("\r\n");t.shift(),t.pop();for(var n=t.map((function(e){var t=e.split(",");return{startTime:y.DateTime.fromFormat(t[0],"yyyy-MM-dd HH:mm:ss"),endTime:y.DateTime.fromFormat(t[1],"yyyy-MM-dd HH:mm:ss"),duration:y.Duration.fromObject(g(t[2])),sleepTime:y.Duration.fromObject(g(t[3])),wakingInBed:y.Duration.fromObject(g(t[4])),timeToSleep:y.Duration.fromObject(g(t[5])),goodQuality:y.Duration.fromObject(g(t[6])),deepSleep:y.Duration.fromObject(g(t[7])),heartRate:parseInt(t[8]),tag:t[9],annotation:t[10]}})),r=n.reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},t.endTime.toFormat("yyyy-MM-dd-EEE"),t))}),{}),i=7!==n[0].endTime.weekday?n[0].endTime.startOf("week").minus({days:1}):n[0].endTime.startOf("day"),c=n[n.length-1].endTime.endOf("week").startOf("day").diff(i,"days").days,a=[],s=0,o=0;o<c;o++){var d=i.plus({days:o}).toFormat("yyyy-MM-dd-EEE");s===a.length&&a.push([]),a[s].push(r[d]?r[d]:d),o%7===6&&s++}return console.table(a),a}(a);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(F,{children:[Object(x.jsx)(T,{children:"Sleepvis"}),Object(x.jsxs)(D,{children:["Autosleep\u30a2\u30d7\u30ea\u306eCSV\u3092\u53ef\u8996\u5316\u3059\u308bWeb\u30a2\u30d7\u30ea\u3067\u3059\uff0e",Object(x.jsx)("br",{}),"\u968f\u6642\u6a5f\u80fd\u8ffd\u52a0\u4e2d\u3067\u3059\uff0e\u73fe\u72b6\u306f\uff0c\u7761\u7720\u6642\u9593\u306e\u8868\u793a\u6a5f\u80fd\u306e\u307f\u306b\u306a\u308a\u307e\u3059\uff0e",Object(x.jsx)("br",{}),"\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u305fCSV\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\uff0e"]}),Object(x.jsx)(m,{setInputFile:r}),o&&Object(x.jsx)(B,{calendar:o})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),c(e),a(e)}))};b.a.render(Object(x.jsx)(j.a.StrictMode,{children:Object(x.jsx)(A,{})}),document.getElementById("root")),J()}},[[26,1,2]]]);
//# sourceMappingURL=main.1a52ea33.chunk.js.map