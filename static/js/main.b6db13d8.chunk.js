(this.webpackJsonpsleepvis=this.webpackJsonpsleepvis||[]).push([[0],{20:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var i,r,a,c,s,o,l,d,j,f,u=n(1),p=n.n(u),b=n(12),m=n.n(b),x=(n(20),n(10)),O=n(0),h=function(e){var t=e.setInputFile,n=Object(u.useCallback)((function(e){null!==e.currentTarget.files&&t(e.currentTarget.files[0])}),[t]);return Object(O.jsx)("div",{style:{padding:"4px",margin:"8px"},children:Object(O.jsx)("input",{type:"file",accept:"text",onChange:n})})},y=n(5),g=n(7),v=n(4),T=function(e){return 2===e.split(":").length?{hours:parseInt(e.split(":")[0]),minutes:parseInt(e.split(":")[1])}:"--"===e?{hours:0,minutes:0}:{hours:0,minutes:parseInt(e)}},w=n(2),F=n(3),D=F.a.div(i||(i=Object(w.a)(["\n  margin-top: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n"]))),S=F.a.h1(r||(r=Object(w.a)(["\n  /* color: #ffffff; */\n"]))),I=F.a.div(a||(a=Object(w.a)(["\n  /* color: #ffffff; */\n"]))),k=F.a.div(c||(c=Object(w.a)(["\n  /* color: white; */\n  font-weight: 500;\n  margin-top: 2px;\n  font-size: 2.25rem;\n"]))),M=F.a.div(s||(s=Object(w.a)(["\n  padding: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-flow: column;\n  height: 200px;\n  margin: 4px;\n  border-radius: 8px;\n  background: #eeeeee;\n"]))),E=F.a.div(o||(o=Object(w.a)(["\n  width: calc(220px * 7);\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-end;\n"]))),H=function(e){var t=e.duration,n=e.sleepType;return Object(O.jsx)(C,{duration:t,sleepType:n,children:"string"!==typeof t?t.toFormat("hh:mm"):t})},C=F.a.div(l||(l=Object(w.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  font-weight: 500;\n  display: flex;\n  -webkit-align-items: center;\n  align-items: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  border-radius: 8px;\n  height: ",";\n  width: 60px;\n  margin: 4px;\n  /* color: white; */\n  background: ",";\n"])),(function(e){return Q(e.duration)}),(function(e){return B(e.duration,e.sleepType)})),B=function(e,t){var n="string"===typeof e?parseInt(e):e.hours,i="#0099ff";return"goodQuality"===t&&(i="#15ff00"),"deepSleep"===t&&(i="#7700ff"),n>=8?i+"FF":n>=6?i+"DD":n>=4?i+"BB":n>=2?i+"99":n>=0?i+"55":"#5e5e5edd"},Q=function(e){var t="string"===typeof e?parseInt(e):e.hours;return"".concat(8*t+16,"px")},L=function(e){var t=e.calendar;return Object(O.jsx)(E,{children:t.flat().map((function(e){return"string"!==typeof e&&void 0!==e.endTime?Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(M,{children:[Object(O.jsxs)(z,{children:[Object(O.jsx)(k,{children:e.endTime.setLocale("jp").toFormat("MM.dd")}),Object(O.jsxs)(A,{children:[Object(O.jsxs)("div",{children:["\ud83d\udecc",e.startTime.toFormat("HH:mm")]}),Object(O.jsxs)("div",{children:["\ud83d\udecf",e.endTime.toFormat("HH:mm")]}),Object(O.jsxs)("div",{children:["\u2764\ufe0f",e.heartRate]})]})]}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end"},children:[Object(O.jsx)(R,{children:Object(O.jsx)(H,{duration:e.sleepTime,sleepType:"sleepTime"})}),Object(O.jsx)(R,{children:Object(O.jsx)(H,{duration:e.goodQuality,sleepType:"goodQuality"})}),Object(O.jsx)(R,{children:Object(O.jsx)(H,{duration:e.deepSleep,sleepType:"deepSleep"})})]})]})}):Object(O.jsxs)(M,{children:[Object(O.jsx)(k,{children:"".concat(e.toString().substring(5,10).replace("-","."))}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(O.jsx)(H,{duration:""}),Object(O.jsx)(H,{duration:""}),Object(O.jsx)(H,{duration:""})]})]})}))})},R=F.a.div(d||(d=Object(w.a)(["\n  display: flex;\n  flex-flow: column;\n  justify-content: flex-end;\n  align-items: center;\n"]))),z=F.a.div(j||(j=Object(w.a)(["\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n"]))),A=F.a.div(f||(f=Object(w.a)(["\n  font-size: 0.75rem;\n  font-weight: 500;\n  margin-left: 1rem;\n"]))),J=function(){var e=Object(u.useState)(),t=Object(x.a)(e,2),n=t[0],i=t[1],r=Object(u.useState)(""),a=Object(x.a)(r,2),c=a[0],s=a[1];Object(u.useEffect)((function(){if(n){var e=new FileReader;e.onload=function(){return s(e.result)},e.readAsText(n,"UTF-8")}}),[n]);var o=function(e){if(""===e)return!1;var t=e.split("\r\n");t.shift(),t.pop();for(var n=t.map((function(e){var t=e.split(",");return{startTime:v.DateTime.fromFormat(t[0],"yyyy-MM-dd HH:mm:ss"),endTime:v.DateTime.fromFormat(t[1],"yyyy-MM-dd HH:mm:ss"),duration:v.Duration.fromObject(T(t[2])),sleepTime:v.Duration.fromObject(T(t[3])),wakingInBed:v.Duration.fromObject(T(t[4])),timeToSleep:v.Duration.fromObject(T(t[5])),goodQuality:v.Duration.fromObject(T(t[6])),deepSleep:v.Duration.fromObject(T(t[7])),heartRate:parseInt(t[8]),tag:t[9],annotation:t[10]}})),i=n.reduce((function(e,t){return Object(g.a)(Object(g.a)({},e),{},Object(y.a)({},t.endTime.toFormat("yyyy-MM-dd-EEE"),t))}),{}),r=7!==n[0].endTime.weekday?n[0].endTime.startOf("week").minus({days:1}):n[0].endTime.startOf("day"),a=n[n.length-1].endTime.endOf("week").startOf("day").diff(r,"days").days,c=[],s=0,o=0;o<a;o++){var l=r.plus({days:o}).toFormat("yyyy-MM-dd-EEE");s===c.length&&c.push([]),c[s].push(i[l]?i[l]:l),o%7===6&&s++}return console.table(c),c}(c);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(D,{children:[Object(O.jsx)(S,{children:"Sleepvis"}),Object(O.jsxs)(I,{children:["Autosleep\u30a2\u30d7\u30ea\u306eCSV\u3092\u53ef\u8996\u5316\u3059\u308bWeb\u30a2\u30d7\u30ea\u3067\u3059\uff0e",Object(O.jsx)("br",{}),"\u65e5\u4ed8\u306e\u53f3\u96a3\u306e\u6642\u523b\u306f\uff0c\u4e0a\u304b\u3089\u9806\u306b\uff0c\u5c31\u5bdd\u6642\u9593\uff0c\u8d77\u5e8a\u6642\u9593\uff0c\u5fc3\u62cd\u6570\u3068\u306a\u308a\u307e\u3059\uff0e",Object(O.jsx)("br",{}),"\u9752\u8272\u306f\u7761\u7720\u6642\u9593\uff0c\u7dd1\u8272\u306f\u826f\u8cea\u306a\u7761\u7720\u6642\u9593\uff0c\u7d2b\u8272\u306f\u6df1\u3044\u7761\u7720\u6642\u9593\u3092\u8868\u3057\u3066\u3044\u307e\u3059\uff0e",Object(O.jsx)("br",{}),"\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u305fCSV\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\uff0e"]}),Object(O.jsx)(h,{setInputFile:i}),o&&Object(O.jsx)(L,{calendar:o})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};m.a.render(Object(O.jsx)(p.a.StrictMode,{children:Object(O.jsx)(J,{})}),document.getElementById("root")),P()}},[[26,1,2]]]);
//# sourceMappingURL=main.b6db13d8.chunk.js.map