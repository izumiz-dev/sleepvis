{"version":3,"sources":["components/visualize/DayUnit.tsx","components/FileInput.tsx","App.tsx","Logic/parseCSV.ts","reportWebVitals.ts","index.tsx"],"names":["DayUnit","duration","DayComponent","styled","div","props","durationHeight","durationColor","durationNum","parseInt","FileInput","setInputFile","onUploadImage","useCallback","e","currentTarget","files","style","background","padding","margin","type","accept","onChange","App","useState","inputFile","readCSV","setReadCSV","useEffect","reader","FileReader","onload","result","readAsText","rows","csvString","origin","split","pop","map","line","lineCols","startTime","DateTime","fromFormat","endTime","sleepTime","wakingInBed","timeToSleep","goodQuality","deepSleep","heartRate","tag","annotation","slice","weekday","padNum","spaces","Array","fill","unshift","i","length","diff","diffDays","Math","floor","days","j","splice","parseCSV","OuterContainer","Title","Days","col","Frame","undefined","setLocale","toFormat","h1","Date","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ed347e6c.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\ninterface IDay {\n  duration: string;\n}\n\nexport const DayUnit = ({ duration }: IDay) => {\n  return <DayComponent duration={duration}>{duration}</DayComponent>;\n};\n\ninterface IDayDesign {\n  duration: string;\n}\n\nconst DayComponent = styled.div<IDayDesign>`\n  display: flex;\n  -webkit-align-items: center;\n  align-items: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  border-radius: 4px;\n  height: ${(props) => durationHeight(props.duration)};\n  width: 60px;\n  margin: 4px;\n  color: white;\n  background: ${(props) => durationColor(props.duration)};\n` as any;\n\nconst durationColor = (duration: string) => {\n  const durationNum = parseInt(duration, 10);\n  if (durationNum >= 6) {\n    return \"#54c454dd\";\n  } else if (durationNum >= 4) {\n    return \"#c47636dd\";\n  } else if (durationNum >= 2) {\n    return \"#DD0000dd\";\n  } else {\n    return \"#FFFFFF\";\n  }\n};\n\nconst durationHeight = (duration: string) => {\n  const durationNum = parseInt(duration, 10);\n  const height = `${durationNum * 1.5 + 20}px`;\n  return height;\n};\n","import { useCallback } from \"react\";\n\nexport interface IInputFile {\n  setInputFile: React.Dispatch<React.SetStateAction<File | undefined>>;\n}\n\nexport const FileInput = ({ setInputFile }: IInputFile) => {\n  const onUploadImage = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      if (e.currentTarget.files !== null) {\n        setInputFile(e.currentTarget.files[0]);\n      }\n    },\n    [setInputFile]\n  );\n\n  return (\n    // <>\n    <div style={{ background: \"#FFFFFFDD\", padding: \"4px\", margin: \"8px\" }}>\n      <input type=\"file\" accept=\"text\" onChange={onUploadImage} />\n    </div>\n    // </>\n  );\n};\n","import styled from \"styled-components\";\nimport { DayUnit } from \"./components/visualize\";\nimport { useEffect, useState } from \"react\";\nimport { FileInput } from \"./components/FileInput\";\nimport { ICol, parseCSV } from \"./Logic/parseCSV\";\n\nexport const App = () => {\n  const [inputFile, setInputFile] = useState<File | undefined>();\n  const [readCSV, setReadCSV] = useState<string>(\"\");\n\n  useEffect(() => {\n    if (inputFile) {\n      const reader = new FileReader();\n      reader.onload = () => setReadCSV(reader.result as string);\n      reader.readAsText(inputFile, \"UTF-8\");\n    }\n  }, [inputFile]);\n\n  const rows = parseCSV(readCSV);\n\n  return (\n    <>\n      <OuterContainer>\n        <Title>睡眠時間</Title>\n        <FileInput setInputFile={setInputFile} />\n        {rows && (\n          <Days>\n            {rows.map((col: ICol) => {\n              if (col === null) {\n                return (\n                  <Frame>\n                    <Date>{\"\"}</Date>\n                    <DayUnit duration={\"\"} />\n                  </Frame>\n                );\n              }\n              if (col.endTime !== undefined) {\n                return (\n                  <Frame>\n                    <Date>{col.endTime.setLocale(\"jp\").toFormat(\"M/d\")}</Date>\n                    <DayUnit duration={col.sleepTime} />\n                  </Frame>\n                );\n              }\n              return null;\n            })}\n          </Days>\n        )}\n      </OuterContainer>\n    </>\n  );\n};\n\nconst OuterContainer = styled.div`\n  margin-top: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n`;\n\nconst Title = styled.h1`\n  color: #ffffff;\n`;\n\nconst Date = styled.div`\n  color: white;\n` as any;\n\nconst Frame = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-flow: column;\n  height: 80px;\n  border: 1px ridge #ffffff99;\n  /* border-radius: 4px; */\n  background: linear-gradient(#08176d99, #01010799);\n  margin: 1px;\n` as any;\n\nconst Days = styled.div`\n  width: calc(74px * 7);\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-end;\n` as any;\n","import { DateTime } from \"luxon\";\n\nexport const parseCSV = (csvString: string) => {\n  if (csvString === \"\") {\n    return false;\n  }\n  // CSVString を オブジェクトの配列に\n\n  const origin: any = csvString.split(\"\\r\\n\");\n  origin.pop();\n\n  const rows: any = origin\n    .map((line: any) => {\n      const lineCols = line.split(\",\");\n      return {\n        startTime: DateTime.fromFormat(lineCols[0], \"yyyy-MM-dd HH:mm:ss\"),\n        endTime: DateTime.fromFormat(lineCols[1], \"yyyy-MM-dd HH:mm:ss\"),\n        duration: lineCols[2],\n        sleepTime: lineCols[3],\n        wakingInBed: lineCols[4],\n        timeToSleep: lineCols[5],\n        goodQuality: lineCols[6],\n        deepSleep: lineCols[7],\n        heartRate: lineCols[8],\n        tag: lineCols[9],\n        annotation: lineCols[10],\n      };\n    })\n    .slice(1);\n\n  // 開始時点の曜日を揃えるために空白(null)を追加\n  if (rows[0].endTime.weekday !== 7) {\n    const padNum = 7 - rows[0].endTime.weekday + 1;\n    const spaces = new Array(padNum).fill(null);\n    rows.unshift(...spaces);\n  }\n\n  // 記録されてないデータがある場合に，空白(null)を追加\n  // バグってるというかこの処理の方法がだと対処できてない\n  for (let i = 0; i < rows.length - 1; i++) {\n    if (rows[i] === null) continue;\n    const diff = rows[i + 1].endTime.diff(rows[i].endTime, \"days\");\n    const diffDays = Math.floor(diff.days);\n    if (diffDays >= 2) {\n      for (let j = 1; j < diffDays; j++) {\n        rows.splice(i + j, 0, null);\n      }\n    }\n  }\n\n  return rows;\n};\n\nexport interface ICol {\n  startTime: DateTime; //  睡眠開始時刻\n  endTime: DateTime; //  睡眠終了時刻\n  duration: string; //  Duration\n  sleepTime: string; //  睡眠時間\n  wakingInBed: string; //  ベッドで起きていた時間\n  timeToSleep: string; //  眠りにつくまでの時間\n  goodQuality: string; //  良質な睡眠\n  deepSleep: string; //  深い睡眠\n  heartRate: string; //  心拍数\n  tag: string; //  タグ\n  annotation: string; //  注釈\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { App } from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}