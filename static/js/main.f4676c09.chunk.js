(this.webpackJsonpsleepvis=this.webpackJsonpsleepvis||[]).push([[0],{20:function(e,n,t){},26:function(e,n,t){"use strict";t.r(n);var i,r,c,a,s,o,l,d,j,f,u,b,p,m=t(1),O=t.n(m),x=t(12),h=t.n(x),y=(t(20),t(6)),g=t(0),v=function(e){var n=e.setInputFile,t=Object(m.useCallback)((function(e){null!==e.currentTarget.files&&n(e.currentTarget.files[0])}),[n]);return Object(g.jsx)("div",{style:{padding:"4px",margin:"8px"},children:Object(g.jsx)("input",{type:"file",accept:"text",onChange:t})})},w=t(5),T=t(8),F=t(4),k=function(e){if(""===e)return null;var n=e.split("\n");n.shift(),n.pop();for(var t=n.map((function(e){var n=e.split(",");return{startTime:F.DateTime.fromFormat(n[0],"yyyy-MM-dd HH:mm:ss"),endTime:F.DateTime.fromFormat(n[1],"yyyy-MM-dd HH:mm:ss"),duration:F.Duration.fromObject(S(n[2])),sleepTime:F.Duration.fromObject(S(n[3])),wakingInBed:F.Duration.fromObject(S(n[4])),timeToSleep:F.Duration.fromObject(S(n[5])),goodQuality:F.Duration.fromObject(S(n[6])),deepSleep:F.Duration.fromObject(S(n[7])),heartRate:parseInt(n[8]),tag:n[9],annotation:n[10]}})),i=t.reduce((function(e,n){return Object(T.a)(Object(T.a)({},e),{},Object(w.a)({},n.endTime.toFormat("yyyy-MM-dd-EEE"),n))}),{}),r=7!==t[0].endTime.weekday?t[0].endTime.startOf("week").minus({days:1}):t[0].endTime.startOf("day"),c=t[t.length-1].endTime.endOf("week").startOf("day").diff(r,"days").days,a=[],s=0,o=0;o<c;o++){var l=r.plus({days:o}).toFormat("yyyy-MM-dd-EEE");s===a.length&&a.push([]),a[s].push(i[l]?i[l]:l),o%7===6&&s++}return console.table(a),a},S=function(e){return 2===e.split(":").length?{hours:parseInt(e.split(":")[0]),minutes:parseInt(e.split(":")[1])}:"--"===e?{hours:0,minutes:0}:{hours:0,minutes:parseInt(e)}},D=t(2),M=t(3),E=M.a.div(i||(i=Object(D.a)(["\n  margin-top: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n"]))),I=M.a.h1(r||(r=Object(D.a)(["\n  /* color: #ffffff; */\n"]))),H=M.a.div(c||(c=Object(D.a)(["\n  /* color: #ffffff; */\n"]))),C=M.a.div(a||(a=Object(D.a)(["\n  color: ",";\n  font-weight: 500;\n  margin-top: 1rem;\n  font-size: 2.25em;\n"])),(function(e){return W(e.dayOfWeek||9999)})),B=M.a.div(s||(s=Object(D.a)(["\n  padding: 0.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-flow: column;\n  height: 200px;\n  margin: 0.25rem;\n  border-radius: 1rem;\n  background: #eeeeee;\n"]))),Q=M.a.div(o||(o=Object(D.a)(["\n  width: calc((9vw + 3vw + 1vw) * 7);\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-end;\n"]))),W=function(e){return 6===e?"#0000dd":7===e?"#dd0000":"black"},L=function(e){var n=e.duration,t=e.sleepType;return Object(g.jsx)(R,{duration:n,sleepType:t,children:"string"!==typeof n?n.toFormat("hh:mm"):n})},R=M.a.div(l||(l=Object(D.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  font-weight: 500;\n  display: flex;\n  -webkit-align-items: center;\n  align-items: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  border-radius: 8px;\n  height: ",";\n  width: 3vw;\n  margin: 0.5vw;\n  /* color: white; */\n  background: ",";\n"])),(function(e){return A(e.duration)}),(function(e){return z(e.duration,e.sleepType)})),z=function(e,n){var t="string"===typeof e?parseInt(e):e.hours,i="#0099ff";return"goodQuality"===n&&(i="#15ff00"),"deepSleep"===n&&(i="#7700ff"),t>=8?i+"FF":t>=6?i+"DD":t>=4?i+"BB":t>=2?i+"99":t>=0?i+"55":"#5e5e5edd"},A=function(e){var n="string"===typeof e?parseInt(e):e.hours;return"".concat(8*n+16,"px")},J=function(e){var n=e.calendar;return n?Object(g.jsx)(Q,{children:n.flat().map((function(e){return"string"!==typeof e&&void 0!==e.endTime?Object(g.jsxs)(B,{children:[Object(g.jsxs)(U,{children:[Object(g.jsx)(C,{dayOfWeek:e.endTime.weekday,children:e.endTime.setLocale("jp").toFormat("MM.dd")}),Object(g.jsxs)(V,{children:[Object(g.jsxs)("div",{children:["\ud83d\udecc",e.startTime.toFormat("HH:mm")]}),Object(g.jsxs)("div",{children:["\ud83d\udecf",e.endTime.toFormat("HH:mm")]}),Object(g.jsxs)("div",{children:["\u2764\ufe0f",e.heartRate]})]})]}),Object(g.jsxs)(q,{children:[Object(g.jsx)(P,{children:Object(g.jsx)(L,{duration:e.sleepTime,sleepType:"sleepTime"})}),Object(g.jsx)(P,{children:Object(g.jsx)(L,{duration:e.goodQuality,sleepType:"goodQuality"})}),Object(g.jsx)(P,{children:Object(g.jsx)(L,{duration:e.deepSleep,sleepType:"deepSleep"})})]})]}):Object(g.jsxs)(B,{children:[Object(g.jsxs)(U,{children:[Object(g.jsx)(C,{dayOfWeek:F.DateTime.fromFormat(e.toString(),"yyyy-MM-dd-EEE").weekday,children:"".concat(e.toString().substring(5,10).replace("-","."))}),Object(g.jsxs)(V,{children:[Object(g.jsx)("div",{children:"\ud83d\udecc--:--"}),Object(g.jsx)("div",{children:"\ud83d\udecf--:--"}),Object(g.jsx)("div",{children:"\u2764\ufe0f--"})]})]}),Object(g.jsx)(K,{children:Object(g.jsx)(G,{children:"\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093"})})]})}))}):null},P=M.a.div(d||(d=Object(D.a)(["\n  display: flex;\n  flex-flow: column;\n  justify-content: flex-end;\n  align-items: center;\n"]))),U=M.a.div(j||(j=Object(D.a)(["\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n"]))),V=M.a.div(f||(f=Object(D.a)(["\n  font-size: 0.75em;\n  font-weight: 500;\n  margin-left: 1rem;\n"]))),q=M.a.div(u||(u=Object(D.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: flex-end;\n"]))),G=M.a.div(b||(b=Object(D.a)(["\n  width: calc(9vw + 3vw);\n  height: 100px;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  color: rgba(0, 0, 0, 0.5);\n"]))),K=M.a.div(p||(p=Object(D.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),N=function(){var e=Object(m.useState)(),n=Object(y.a)(e,2),t=n[0],i=n[1],r=Object(m.useState)(""),c=Object(y.a)(r,2),a=c[0],s=c[1],o=Object(m.useState)(null),l=Object(y.a)(o,2),d=l[0],j=l[1];return Object(m.useEffect)((function(){if(t){var e=new FileReader;e.onload=function(){return s(e.result)},e.readAsText(t,"UTF-8"),j(k(a))}a&&j(k(a))}),[t,a]),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(E,{children:[Object(g.jsx)(I,{children:"Sleepvis"}),Object(g.jsxs)(H,{children:["Autosleep\u30a2\u30d7\u30ea\u306eCSV\u3092\u53ef\u8996\u5316\u3059\u308bWeb\u30a2\u30d7\u30ea\u3067\u3059\uff0e",Object(g.jsx)("br",{}),"\u65e5\u4ed8\u306e\u53f3\u96a3\u306e\u6642\u523b\u306f\uff0c\u4e0a\u304b\u3089\u9806\u306b\uff0c\u5c31\u5bdd\u6642\u9593\uff0c\u8d77\u5e8a\u6642\u9593\uff0c\u5fc3\u62cd\u6570\u3068\u306a\u308a\u307e\u3059\uff0e",Object(g.jsx)("br",{}),"\u9752\u8272\u306f\u7761\u7720\u6642\u9593\uff0c\u7dd1\u8272\u306f\u826f\u8cea\u306a\u7761\u7720\u6642\u9593\uff0c\u7d2b\u8272\u306f\u6df1\u3044\u7761\u7720\u6642\u9593\u3092\u8868\u3057\u3066\u3044\u307e\u3059\uff0e",Object(g.jsx)("br",{}),"\u203b\u63a8\u5968\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\uff1a\u6a2a\u5e45\u304c1920pixel\u4ee5\u4e0a"]}),Object(g.jsxs)("div",{style:{display:"flex",flexFlow:"row",height:"100%"},children:[Object(g.jsx)(v,{setInputFile:i}),Object(g.jsx)("button",{onClick:function(){return s(X)},children:"\u30c7\u30e2(\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf)"})]}),Object(g.jsx)("hr",{}),Object(g.jsx)(J,{calendar:d})]})})},X="\u7761\u7720\u6642\u523b,Until,Duration,\u7761\u7720\u6642\u9593,\u30d9\u30c3\u30c9\u3067\u8d77\u304d\u3066\u3044\u305f\u6642\u9593, \u7720\u308a\u306b\u3064\u304f\u307e\u3067\u306e\u6642\u9593,\u826f\u8cea\u306a\u7761\u7720,\u6df1\u3044\u7761\u7720,\u5fc3\u62cd\u6570,\u30bf\u30b0,\u6ce8\u91c8\n2021-07-19 03:49:01,2021-07-19 15:04:00,11:14,10:09,1:05,0,6:43,1:29,57,--,--\n2021-07-20 04:15:00,2021-07-20 11:26:00,7:34,6:04,1:30,--,3:44,1:14,65,--,--\n2021-07-21 01:57:02,2021-07-21 07:57:00,5:59,4:32,1:27,1:27,3:25,1:30,55,--,--\n2021-07-22 02:30:00,2021-07-22 12:01:00,9:31,8:00,1:31,--,5:49,2:30,56,--,--\n2021-07-22 22:31:00,2021-07-23 07:58:00,9:27,8:11,1:16,--,6:15,1:59,56,--,--\n2021-07-25 01:43:00,2021-07-25 09:31:00,7:48,7:33,15,--,5:54,2:15,56,--,--\n2021-07-26 02:58:00,2021-07-26 05:32:00,2:34,2:34,0,--,1:56,46,52,--,--\n2021-07-29 00:56:00,2021-07-29 07:57:00,7:01,7:01,0,--,4:37,1:30,54,--,--\n2021-07-30 03:03:53,2021-07-30 05:51:00,2:47,2:40,7,7,2:12,1:04,54,--,--\n2021-07-31 01:46:00,2021-07-31 10:48:00,9:51,9:51,0,--,6:58,2:45,52,--,--",Y=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,27)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),i(e),r(e),c(e),a(e)}))};h.a.render(Object(g.jsx)(O.a.StrictMode,{children:Object(g.jsx)(N,{})}),document.getElementById("root")),Y()}},[[26,1,2]]]);
//# sourceMappingURL=main.f4676c09.chunk.js.map