(this.webpackJsonpsleepvis=this.webpackJsonpsleepvis||[]).push([[0],{20:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var i,r,c,a,s,l,o,d,j,f,u=n(1),p=n.n(u),b=n(12),x=n.n(b),m=(n(20),n(6)),O=n(0),y=function(e){var t=e.setInputFile,n=Object(u.useCallback)((function(e){null!==e.currentTarget.files&&t(e.currentTarget.files[0])}),[t]);return Object(O.jsx)("div",{style:{padding:"4px",margin:"8px"},children:Object(O.jsx)("input",{type:"file",accept:"text",onChange:n})})},h=n(5),g=n(8),v=n(4),w=function(e){if(""===e)return null;var t=e.split("\n");t.shift(),t.pop();for(var n=t.map((function(e){var t=e.split(",");return{startTime:v.DateTime.fromFormat(t[0],"yyyy-MM-dd HH:mm:ss"),endTime:v.DateTime.fromFormat(t[1],"yyyy-MM-dd HH:mm:ss"),duration:v.Duration.fromObject(T(t[2])),sleepTime:v.Duration.fromObject(T(t[3])),wakingInBed:v.Duration.fromObject(T(t[4])),timeToSleep:v.Duration.fromObject(T(t[5])),goodQuality:v.Duration.fromObject(T(t[6])),deepSleep:v.Duration.fromObject(T(t[7])),heartRate:parseInt(t[8]),tag:t[9],annotation:t[10]}})),i=n.reduce((function(e,t){return Object(g.a)(Object(g.a)({},e),{},Object(h.a)({},t.endTime.toFormat("yyyy-MM-dd-EEE"),t))}),{}),r=7!==n[0].endTime.weekday?n[0].endTime.startOf("week").minus({days:1}):n[0].endTime.startOf("day"),c=n[n.length-1].endTime.endOf("week").startOf("day").diff(r,"days").days,a=[],s=0,l=0;l<c;l++){var o=r.plus({days:l}).toFormat("yyyy-MM-dd-EEE");s===a.length&&a.push([]),a[s].push(i[o]?i[o]:o),l%7===6&&s++}return console.table(a),a},T=function(e){return 2===e.split(":").length?{hours:parseInt(e.split(":")[0]),minutes:parseInt(e.split(":")[1])}:"--"===e?{hours:0,minutes:0}:{hours:0,minutes:parseInt(e)}},F=n(2),k=n(3),D=k.a.div(i||(i=Object(F.a)(["\n  margin-top: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n"]))),S=k.a.h1(r||(r=Object(F.a)(["\n  /* color: #ffffff; */\n"]))),M=k.a.div(c||(c=Object(F.a)(["\n  /* color: #ffffff; */\n"]))),I=k.a.div(a||(a=Object(F.a)(["\n  color: ",";\n  font-weight: 500;\n  margin-top: 2px;\n  font-size: 2.25rem;\n"])),(function(e){return H(e.dayOfWeek||9999)})),E=k.a.div(s||(s=Object(F.a)(["\n  padding: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-flow: column;\n  height: 200px;\n  margin: 4px;\n  border-radius: 8px;\n  background: #eeeeee;\n"]))),C=k.a.div(l||(l=Object(F.a)(["\n  width: calc(220px * 7);\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-end;\n"]))),H=function(e){return 6===e?"#0000dd":7===e?"#dd0000":"black"},B=function(e){var t=e.duration,n=e.sleepType;return Object(O.jsx)(Q,{duration:t,sleepType:n,children:"string"!==typeof t?t.toFormat("hh:mm"):t})},Q=k.a.div(o||(o=Object(F.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  font-weight: 500;\n  display: flex;\n  -webkit-align-items: center;\n  align-items: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  border-radius: 8px;\n  height: ",";\n  width: 60px;\n  margin: 4px;\n  /* color: white; */\n  background: ",";\n"])),(function(e){return L(e.duration)}),(function(e){return W(e.duration,e.sleepType)})),W=function(e,t){var n="string"===typeof e?parseInt(e):e.hours,i="#0099ff";return"goodQuality"===t&&(i="#15ff00"),"deepSleep"===t&&(i="#7700ff"),n>=8?i+"FF":n>=6?i+"DD":n>=4?i+"BB":n>=2?i+"99":n>=0?i+"55":"#5e5e5edd"},L=function(e){var t="string"===typeof e?parseInt(e):e.hours;return"".concat(8*t+16,"px")},R=function(e){var t=e.calendar;return t?Object(O.jsx)(C,{children:t&&t.flat().map((function(e){return"string"!==typeof e&&void 0!==e.endTime?Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(E,{children:[Object(O.jsxs)(A,{children:[Object(O.jsx)(I,{dayOfWeek:e.endTime.weekday,children:e.endTime.setLocale("jp").toFormat("MM.dd")}),Object(O.jsxs)(J,{children:[Object(O.jsxs)("div",{children:["\ud83d\udecc",e.startTime.toFormat("HH:mm")]}),Object(O.jsxs)("div",{children:["\ud83d\udecf",e.endTime.toFormat("HH:mm")]}),Object(O.jsxs)("div",{children:["\u2764\ufe0f",e.heartRate]})]})]}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-end"},children:[Object(O.jsx)(z,{children:Object(O.jsx)(B,{duration:e.sleepTime,sleepType:"sleepTime"})}),Object(O.jsx)(z,{children:Object(O.jsx)(B,{duration:e.goodQuality,sleepType:"goodQuality"})}),Object(O.jsx)(z,{children:Object(O.jsx)(B,{duration:e.deepSleep,sleepType:"deepSleep"})})]})]})}):Object(O.jsxs)(E,{children:[Object(O.jsxs)(A,{children:[Object(O.jsx)(I,{dayOfWeek:v.DateTime.fromFormat(e.toString(),"yyyy-MM-dd-EEE").weekday,children:"".concat(e.toString().substring(5,10).replace("-","."))}),Object(O.jsxs)(J,{children:[Object(O.jsx)("div",{children:"\ud83d\udecc--:--"}),Object(O.jsx)("div",{children:"\ud83d\udecf--:--"}),Object(O.jsx)("div",{children:"\u2764\ufe0f--"})]})]}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(O.jsx)("div",{style:{width:"204px",height:"100px",display:"flex",justifyContent:"center",alignContent:"center",color:"rgba(0,0,0,0.5)"},children:"\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093"})})]})}))}):null},z=k.a.div(d||(d=Object(F.a)(["\n  display: flex;\n  flex-flow: column;\n  justify-content: flex-end;\n  align-items: center;\n"]))),A=k.a.div(j||(j=Object(F.a)(["\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n"]))),J=k.a.div(f||(f=Object(F.a)(["\n  font-size: 0.75rem;\n  font-weight: 500;\n  margin-left: 1rem;\n"]))),P=function(){var e=Object(u.useState)(),t=Object(m.a)(e,2),n=t[0],i=t[1],r=Object(u.useState)(""),c=Object(m.a)(r,2),a=c[0],s=c[1],l=Object(u.useState)(null),o=Object(m.a)(l,2),d=o[0],j=o[1];return Object(u.useEffect)((function(){if(n){var e=new FileReader;e.onload=function(){return s(e.result)},e.readAsText(n,"UTF-8"),j(w(a))}a&&j(w(a))}),[n,a]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(D,{children:[Object(O.jsx)(S,{children:"Sleepvis"}),Object(O.jsxs)(M,{children:["Autosleep\u30a2\u30d7\u30ea\u306eCSV\u3092\u53ef\u8996\u5316\u3059\u308bWeb\u30a2\u30d7\u30ea\u3067\u3059\uff0e",Object(O.jsx)("br",{}),"\u65e5\u4ed8\u306e\u53f3\u96a3\u306e\u6642\u523b\u306f\uff0c\u4e0a\u304b\u3089\u9806\u306b\uff0c\u5c31\u5bdd\u6642\u9593\uff0c\u8d77\u5e8a\u6642\u9593\uff0c\u5fc3\u62cd\u6570\u3068\u306a\u308a\u307e\u3059\uff0e",Object(O.jsx)("br",{}),"\u9752\u8272\u306f\u7761\u7720\u6642\u9593\uff0c\u7dd1\u8272\u306f\u826f\u8cea\u306a\u7761\u7720\u6642\u9593\uff0c\u7d2b\u8272\u306f\u6df1\u3044\u7761\u7720\u6642\u9593\u3092\u8868\u3057\u3066\u3044\u307e\u3059\uff0e",Object(O.jsx)("br",{}),"\u203b\u63a8\u5968\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\uff1a\u6a2a\u5e45\u304c1920pixel\u4ee5\u4e0a"]}),Object(O.jsxs)("div",{style:{display:"flex",flexFlow:"row",height:"100%"},children:[Object(O.jsx)(y,{setInputFile:i}),Object(O.jsx)("button",{onClick:function(){return s(U)},children:"\u30c7\u30e2(\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf)"})]}),Object(O.jsx)("hr",{}),Object(O.jsx)(R,{calendar:d})]})})},U="\u7761\u7720\u6642\u523b,Until,Duration,\u7761\u7720\u6642\u9593,\u30d9\u30c3\u30c9\u3067\u8d77\u304d\u3066\u3044\u305f\u6642\u9593, \u7720\u308a\u306b\u3064\u304f\u307e\u3067\u306e\u6642\u9593,\u826f\u8cea\u306a\u7761\u7720,\u6df1\u3044\u7761\u7720,\u5fc3\u62cd\u6570,\u30bf\u30b0,\u6ce8\u91c8\n2021-07-19 03:49:01,2021-07-19 15:04:00,11:14,10:09,1:05,0,6:43,1:29,57,--,--\n2021-07-20 04:15:00,2021-07-20 11:26:00,7:34,6:04,1:30,--,3:44,1:14,65,--,--\n2021-07-21 01:57:02,2021-07-21 07:57:00,5:59,4:32,1:27,1:27,3:25,1:30,55,--,--\n2021-07-22 02:30:00,2021-07-22 12:01:00,9:31,8:00,1:31,--,5:49,2:30,56,--,--\n2021-07-22 22:31:00,2021-07-23 07:58:00,9:27,8:11,1:16,--,6:15,1:59,56,--,--\n2021-07-25 01:43:00,2021-07-25 09:31:00,7:48,7:33,15,--,5:54,2:15,56,--,--\n2021-07-26 02:58:00,2021-07-26 05:32:00,2:34,2:34,0,--,1:56,46,52,--,--\n2021-07-29 00:56:00,2021-07-29 07:57:00,7:01,7:01,0,--,4:37,1:30,54,--,--\n2021-07-30 03:03:53,2021-07-30 05:51:00,2:47,2:40,7,7,2:12,1:04,54,--,--\n2021-07-31 01:46:00,2021-07-31 10:48:00,9:51,9:51,0,--,6:58,2:45,52,--,--",V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),c(e),a(e)}))};x.a.render(Object(O.jsx)(p.a.StrictMode,{children:Object(O.jsx)(P,{})}),document.getElementById("root")),V()}},[[26,1,2]]]);
//# sourceMappingURL=main.c18ba592.chunk.js.map